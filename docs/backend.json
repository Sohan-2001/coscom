{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Cosmic Insights application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "creationDate": {
          "type": "string",
          "description": "The date and time the user account was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "email",
        "creationDate"
      ]
    },
    "BirthChart": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "BirthChart",
      "type": "object",
      "description": "Stores birth chart information for a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the BirthChart entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N BirthChart)"
        },
        "birthDate": {
          "type": "string",
          "description": "User's birth date (YYYY-MM-DD).",
          "format": "date-time"
        },
        "birthTime": {
          "type": "string",
          "description": "User's birth time (HH:MM:SS)."
        },
        "birthLocation": {
          "type": "string",
          "description": "User's birth location."
        }
      },
      "required": [
        "id",
        "userId",
        "birthDate",
        "birthTime",
        "birthLocation"
      ]
    },
    "PalmReading": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "PalmReading",
      "type": "object",
      "description": "Stores palm reading data for a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the PalmReading entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N PalmReading)"
        },
        "selectedLines": {
          "type": "array",
          "description": "Array of selected palm lines.",
          "items": {
            "type": "string"
          }
        },
        "readingDate": {
          "type": "string",
          "description": "Date the palm reading was generated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "selectedLines",
        "readingDate"
      ]
    },
    "VedicReading": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "VedicReading",
      "type": "object",
      "description": "Stores the Vedic astrology reading and personalized insights.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the VedicReading entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N VedicReading)"
        },
        "birthChartId": {
          "type": "string",
          "description": "Reference to BirthChart. (Relationship: BirthChart 1:N VedicReading)"
        },
        "palmReadingId": {
          "type": "string",
          "description": "Reference to PalmReading. (Relationship: PalmReading 1:N VedicReading)"
        },
        "readingText": {
          "type": "string",
          "description": "The generated Vedic reading text."
        },
        "readingDate": {
          "type": "string",
          "description": "Date the Vedic reading was generated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "birthChartId",
        "palmReadingId",
        "readingText",
        "readingDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profiles. Uses path-based ownership for data privacy.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/birthCharts/{birthChartId}",
        "definition": {
          "entityName": "BirthChart",
          "schema": {
            "$ref": "#/backend/entities/BirthChart"
          },
          "description": "Stores birth chart data for a specific user. Enforces path-based ownership.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "birthChartId",
              "description": "The unique identifier for the birth chart."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/palmReadings/{palmReadingId}",
        "definition": {
          "entityName": "PalmReading",
          "schema": {
            "$ref": "#/backend/entities/PalmReading"
          },
          "description": "Stores palm reading data for a specific user. Enforces path-based ownership.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "palmReadingId",
              "description": "The unique identifier for the palm reading."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/vedicReadings/{vedicReadingId}",
        "definition": {
          "entityName": "VedicReading",
          "schema": {
            "$ref": "#/backend/entities/VedicReading"
          },
          "description": "Stores Vedic reading data for a specific user. Enforces path-based ownership.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "vedicReadingId",
              "description": "The unique identifier for the vedic reading."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to store user data, birth charts, palm readings, and Vedic readings for the Cosmic Insights application. It prioritizes security and scalability by adhering to the principles of Authorization Independence, Structural Segregation, and Access Modeling. Each user has their own collection of birth charts, palm readings, and Vedic readings, ensuring that data is organized and access can be controlled at the user level. User data is stored separately. This ensures clear ownership and simplifies security rules. Specifically, the structure uses path-based ownership for user-specific data, which allows for simple and efficient security rules based on the `request.auth.uid`. The structure avoids the need for complex `get()` calls in the security rules by using simple path-based rules, ensuring Authorization Independence."
  }
}